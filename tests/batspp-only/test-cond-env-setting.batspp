## SETUP (OPTIONAL - USE IF REQUIRED)
## Bracketed Paste is disabled to prevent characters after output
## Example: 
## $ echo 'Hii'
## | Hi?2004l
# bind 'set enable-bracketed-paste off'

## TEST:  Make sure simple prompt used (e.g., no escapes that might contaminate output)
## PS1="$ "
## TODO: PS1="> "
## NOTE: The Jupyter bash kernel requires that PS1 not be modified as they customize it. 
$ echo $PS1
[PEXP\[\]ECT_PROMPT>

# Delete all aliases and function
# TODO: Instead start from pristine environment
$ unalias -a
$ alias | wc -l
$ for f in $(typeset -f | egrep '^\w+'); do unset -f $f; done
$ typeset -f | egrep '^\w+' | wc -l
0
0

$ alias testuser="sed -r "s/"$USER"+/user/g""

# Setting a temp directory for tests
$ TMP=/tmp/test-cond-env
## NOTE: Source it directly from the ./tests directory.
$ BIN_DIR=$PWD/..
## You will need to run jupyter from that directory.
## source $TEMP_BIN/_dir-aliases.bash
$ source _dir-aliases.bash
$ alias | wc -l
9

## NOTE: For reproducability, the directory name needs to be fixed
## In place of $$, use a psuedo random number (e,g., 1710)
## *** All output from one run to the next needs to be the same ***
## temp_dir=$TMP/test-$$
$ temp_dir=$TMP/test-1710
$ mkdir -p "$temp_dir"
# TODO: /bin/rm -rvf "$temp_dir"
$ cd "$temp_dir"
$ pwd
#ALIAS FOR PRINTING SEPERATION LINES (FOR JUPYTER)
$ alias linebr="printf '%*s\n' "${COLUMNS:-$(tput cols)}" '' | tr ' ' -"
/tmp/test-cond-env/test-1710

# Count aliases proper
$ alias | wc -l
10

# Count functions
$ typeset -f | egrep '^\w+' | wc -l
2

$ source $BIN_DIR/tomohara-aliases.bash

# SETTING A ENVIRONMENT VARIABLE NAMED COND_ENV_TEST_TEMP
$ cond-setenv COND_ENV_TEST_TEMP tmp/cond-env-test-temp

# PROOF THAT THE ENVIRONMENT VARIABLE IS CREATED
$ echo $COND_ENV_TEST_TEMP
tmp/cond-env-test-temp

# USE OF ENV VARIABLE TO CREATE A SUB-DIRECTORY
$ mkdir -p $COND_ENV_TEST_TEMP
$ ls -l | awk '!($6=$7=$8="")' | testuser
total 4      
drwxrwxr-x 3 user user 4096    tmp

# THE OUTPUT OF printenv.sh IS STORED IN temp_env1.tmp CREATED IN THE DIRECTORY SPECIFIED BY $COND_ENV_TEST_TEMP
$ pwd
$ printenv >> $COND_ENV_TEST_TEMP/temp-env-1
/tmp/test-cond-env/test-1710

# MOVING TO THE DIRECTORY & VIEWING THE OUTPUT LOG
$ cd $COND_ENV_TEST_TEMP
# ERROR PRONE COMMAND (BATSPP)
# cat temp-env-1
/tmp/test-cond-env/test-1710/tmp/cond-env-test-temp
]1;cond-env-test-temp [/tmp/test-cond-env/test-1710/tmp/cond-env-test-temp]]2;cond-env-test-temp [/tmp/test-cond-env/test-1710/tmp/cond-env-test-temp]

$ cat temp-env-1 | grep BASH | head -n 1
BASH=/usr/bin/bash
