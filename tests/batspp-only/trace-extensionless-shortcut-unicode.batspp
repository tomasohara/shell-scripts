$ echo $PS1
[PEXP\[\]ECT_PROMPT>

# Delete all aliases and function
# TODO: Instead start from pristine environment
$ unalias -a
$ alias | wc -l
$ for f in $(typeset -f | egrep '^\w+'); do unset -f $f; done
$ typeset -f | egrep '^\w+' | wc -l
# Setting a temp directory for tests
$ TMP=/tmp/test-extensionless
$ BIN_DIR=$PWD/..
0
0

$ alias | wc -l
0

$ temp_dir=$TMP/test-3570
$ mkdir -p "$temp_dir"
$ cd "$temp_dir"
$ pwd
#ALIAS FOR PRINTING SEPERATION LINES (FOR JUPYTER)
$ alias linebr="printf '%*s\n' "${COLUMNS:-$(tput cols)}" '' | tr ' ' -"
/tmp/test-extensionless/test-3570

# Modified testnum to include Hex
$ alias testnum="sed -r "s/[0-9,A-F,a-f]/X/g"" 
$ alias testuser="sed -r "s/"$USER"+/user/g""

# Count aliases proper
$ alias | wc -l
# Count functions
$ typeset -f | egrep '^\w+' | wc -l
3
0

$ pwd
$ rm -rf ./*
$ uname -r > version1.txt
/tmp/test-extensionless/test-3570

$ source $BIN_DIR/tomohara-aliases.bash

# function show-unicode-code-info-aux() { perl -CIOE   -e 'use Encode "encode_utf8"; print "char\tord\toffset\tencoding\n";'    -ne 'chomp;  printf "%s: %d\n", $_, length($_); foreach $c (split(//, $_)) { $encoding = encode_utf8($c); printf "%s\t%04X\t%d\t%s\n", $c, ord($c), $offset, unpack("H*", $encoding); $offset += length($encoding); }   $offset += length($/); print "\n"; ' < "$1"; }
# function show-unicode-code-info { show-unicode-code-info-aux "$@"; }
# function show-unicode-code-info-stdin() { in_file="$TEMP/show-unicode-code-info.$$"; cat >| $in_file;  show-unicode-code-info-aux $in_file; }
# function output-BOM { perl -e 'print "\xEF\xBB\xBF\n";'; }
# function show-unicode-control-chars { perl -pe 'use open ":std", ":encoding(UTF-8)"; s/[\x00-\x1F]/chr(ord($&) + 0x2400)/eg;'; }

$ show-unicode-code-info-aux ./version1.txt | testnum 
XhXr	orX	oXXsXt	XnXoXing
X.XX.X-XX-gXnXriX: XX
X	XXXX	X	XX
.	XXXX	X	XX
X	XXXX	X	XX
X	XXXX	X	XX
.	XXXX	X	XX
X	XXXX	X	XX
-	XXXX	X	XX
X	XXXX	X	XX
X	XXXX	X	XX
-	XXXX	X	XX
g	XXXX	XX	XX
X	XXXX	XX	XX
n	XXXX	XX	XX
X	XXXX	XX	XX
r	XXXX	XX	XX
i	XXXX	XX	XX
X	XXXX	XX	XX


$ show-unicode-code-info ./version1.txt | testnum
XhXr	orX	oXXsXt	XnXoXing
X.XX.X-XX-gXnXriX: XX
X	XXXX	X	XX
.	XXXX	X	XX
X	XXXX	X	XX
X	XXXX	X	XX
.	XXXX	X	XX
X	XXXX	X	XX
-	XXXX	X	XX
X	XXXX	X	XX
X	XXXX	X	XX
-	XXXX	X	XX
g	XXXX	XX	XX
X	XXXX	XX	XX
n	XXXX	XX	XX
X	XXXX	XX	XX
r	XXXX	XX	XX
i	XXXX	XX	XX
X	XXXX	XX	XX


## Need Help
# show-unicode-code-info-stdin ./version1.txt

## Need Help (output-BOM shows no output)
# output-BOM

## Issue (non ending process) 
# show-unicode-control-chars version1.txt 

# # ERROR GENERATED (shown below) [0LD]
# $ show-unicode-code-info-stdin ./catmanual.txt
# | bash: /show-unicode-code-info.5292: Permission denied
# | bash: /show-unicode-code-info.5292: No such file or directory

$ echo "END"
END
